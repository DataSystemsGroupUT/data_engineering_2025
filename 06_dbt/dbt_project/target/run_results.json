{"metadata": {"dbt_schema_version": "https://schemas.getdbt.com/dbt/run-results/v6.json", "dbt_version": "1.10.13", "generated_at": "2025-10-20T20:17:08.283394Z", "invocation_id": "516e95ce-a7b6-4291-b4c4-159b10cf0560", "invocation_started_at": "2025-10-20T20:17:06.078543Z", "env": {}}, "results": [{"status": "success", "timing": [{"name": "compile", "started_at": "2025-10-20T20:17:07.190870Z", "completed_at": "2025-10-20T20:17:07.215479Z"}, {"name": "execute", "started_at": "2025-10-20T20:17:07.217238Z", "completed_at": "2025-10-20T20:17:07.448176Z"}], "thread_id": "Thread-1 (worker)", "execution_time": 0.2614407539367676, "adapter_response": {"_message": "OK"}, "message": "OK", "failures": null, "unique_id": "model.clickhouse_dbt_demo.dim_date", "compiled": true, "compiled_code": "SELECT\n    *\nFROM `default`.`stg_dim_date`", "relation_name": "`default`.`dim_date`", "batch_results": null}, {"status": "success", "timing": [{"name": "compile", "started_at": "2025-10-20T20:17:07.460071Z", "completed_at": "2025-10-20T20:17:07.469177Z"}, {"name": "execute", "started_at": "2025-10-20T20:17:07.470797Z", "completed_at": "2025-10-20T20:17:07.538478Z"}], "thread_id": "Thread-1 (worker)", "execution_time": 0.08144974708557129, "adapter_response": {"_message": "OK"}, "message": "OK", "failures": null, "unique_id": "model.clickhouse_dbt_demo.dim_payment", "compiled": true, "compiled_code": "SELECT\n    *\nFROM `default`.`stg_dim_product`", "relation_name": "`default`.`dim_payment`", "batch_results": null}, {"status": "success", "timing": [{"name": "compile", "started_at": "2025-10-20T20:17:07.546806Z", "completed_at": "2025-10-20T20:17:07.554631Z"}, {"name": "execute", "started_at": "2025-10-20T20:17:07.556936Z", "completed_at": "2025-10-20T20:17:07.620491Z"}], "thread_id": "Thread-1 (worker)", "execution_time": 0.0762929916381836, "adapter_response": {"_message": "OK"}, "message": "OK", "failures": null, "unique_id": "model.clickhouse_dbt_demo.dim_product", "compiled": true, "compiled_code": "SELECT\n    *\nFROM `default`.`stg_dim_product`", "relation_name": "`default`.`dim_product`", "batch_results": null}, {"status": "success", "timing": [{"name": "compile", "started_at": "2025-10-20T20:17:07.630929Z", "completed_at": "2025-10-20T20:17:07.636597Z"}, {"name": "execute", "started_at": "2025-10-20T20:17:07.637483Z", "completed_at": "2025-10-20T20:17:07.701556Z"}], "thread_id": "Thread-1 (worker)", "execution_time": 0.07402396202087402, "adapter_response": {"_message": "OK"}, "message": "OK", "failures": null, "unique_id": "model.clickhouse_dbt_demo.dim_store", "compiled": true, "compiled_code": "SELECT\n    *\nFROM `default`.`stg_dim_store`", "relation_name": "`default`.`dim_store`", "batch_results": null}, {"status": "success", "timing": [{"name": "compile", "started_at": "2025-10-20T20:17:07.708847Z", "completed_at": "2025-10-20T20:17:07.718305Z"}, {"name": "execute", "started_at": "2025-10-20T20:17:07.719259Z", "completed_at": "2025-10-20T20:17:07.783376Z"}], "thread_id": "Thread-1 (worker)", "execution_time": 0.0768117904663086, "adapter_response": {"_message": "OK"}, "message": "OK", "failures": null, "unique_id": "model.clickhouse_dbt_demo.dim_supplier", "compiled": true, "compiled_code": "SELECT\n    *\nFROM `default`.`stg_dim_supplier`", "relation_name": "`default`.`dim_supplier`", "batch_results": null}, {"status": "success", "timing": [{"name": "compile", "started_at": "2025-10-20T20:17:07.791183Z", "completed_at": "2025-10-20T20:17:07.799517Z"}, {"name": "execute", "started_at": "2025-10-20T20:17:07.800471Z", "completed_at": "2025-10-20T20:17:07.864200Z"}], "thread_id": "Thread-1 (worker)", "execution_time": 0.07495570182800293, "adapter_response": {"_message": "OK"}, "message": "OK", "failures": null, "unique_id": "model.clickhouse_dbt_demo.fact_sales", "compiled": true, "compiled_code": "SELECT\n    *\nFROM `default`.`stg_fact_sales`", "relation_name": "`default`.`fact_sales`", "batch_results": null}, {"status": "success", "timing": [{"name": "compile", "started_at": "2025-10-20T20:17:07.875437Z", "completed_at": "2025-10-20T20:17:07.883394Z"}, {"name": "execute", "started_at": "2025-10-20T20:17:07.884400Z", "completed_at": "2025-10-20T20:17:07.957873Z"}], "thread_id": "Thread-1 (worker)", "execution_time": 0.08553147315979004, "adapter_response": {"_message": "OK"}, "message": "OK", "failures": null, "unique_id": "model.clickhouse_dbt_demo.stg_dim_customer", "compiled": true, "compiled_code": "SELECT\n    CustomerKey,\n    FirstName,\n    LastName,\n    Segment,\n    City,\n    ValidFrom,\n    ValidTo\nFROM file('/var/lib/clickhouse/user_files/dim_customer.csv')", "relation_name": "`default`.`stg_dim_customer`", "batch_results": null}, {"status": "success", "timing": [{"name": "compile", "started_at": "2025-10-20T20:17:07.967401Z", "completed_at": "2025-10-20T20:17:07.973083Z"}, {"name": "execute", "started_at": "2025-10-20T20:17:07.974116Z", "completed_at": "2025-10-20T20:17:08.051111Z"}], "thread_id": "Thread-1 (worker)", "execution_time": 0.08603024482727051, "adapter_response": {"_message": "OK"}, "message": "OK", "failures": null, "unique_id": "model.clickhouse_dbt_demo.dim_customer", "compiled": true, "compiled_code": "SELECT\n    CustomerKey,\n    FirstName,\n    LastName,\n    Segment,\n    City,\n    ValidFrom,\n    ValidTo\nFROM `default`.`stg_dim_customer`", "relation_name": "`default`.`dim_customer`", "batch_results": null}, {"status": "error", "timing": [{"name": "compile", "started_at": "2025-10-20T20:17:08.065528Z", "completed_at": "2025-10-20T20:17:08.083852Z"}, {"name": "execute", "started_at": "2025-10-20T20:17:08.085642Z", "completed_at": "2025-10-20T20:17:08.258082Z"}], "thread_id": "Thread-1 (worker)", "execution_time": 0.2026677131652832, "adapter_response": {}, "message": "Database Error in model cust_sales_detailed_summary (models/marts/cust_sales_detailed_summary.sql)\n  Received ClickHouse exception, code: 47, server response: Code: 47. DB::Exception: Unknown expression or table expression identifier `CustomerKey` in scope SELECT `c.CustomerKey`, FirstName, LastName, CustomerCity, `p.ProductKey`, ProductName, `s.StoreKey`, StoreName, TotalOrders, TotalSales, LastOrderDate FROM default.cust_sales_detailed_summary WHERE CustomerKey NOT IN (SELECT CustomerKey FROM default.cust_sales_detailed_summary__dbt_new_data). Maybe you meant: ['CustomerCity']. (UNKNOWN_IDENTIFIER) (version 25.9.3.48 (official build)) (for url http://clickhouse-server:8123)\n  compiled code at target/run/clickhouse_dbt_demo/models/marts/cust_sales_detailed_summary.sql", "failures": null, "unique_id": "model.clickhouse_dbt_demo.cust_sales_detailed_summary", "compiled": true, "compiled_code": "\n\nSELECT\n    c.CustomerKey,\n    c.FirstName,\n    c.LastName,\n    c.City AS CustomerCity,\n    p.ProductKey,\n    p.ProductName,\n    s.StoreKey,\n    s.StoreName,\n    COUNT(f.SaleID) AS TotalOrders,\n    SUM(f.SalesAmount) AS TotalSales,\n    MAX(f.FullDate) AS LastOrderDate\nFROM `default`.`fact_sales` AS f\nLEFT JOIN `default`.`dim_customer` AS c\n    ON f.CustomerKey = c.CustomerKey\nLEFT JOIN `default`.`dim_product` AS p\n    ON f.ProductKey = p.ProductKey\nLEFT JOIN `default`.`dim_store` AS s\n    ON f.StoreKey = s.StoreKey\n\n\n  -- Only include new sales since the last run\n  WHERE f.FullDate > (SELECT MAX(LastOrderDate) FROM `default`.`cust_sales_detailed_summary`)\n\n\nGROUP BY\n    c.CustomerKey,\n    c.FirstName,\n    c.LastName,\n    c.City,\n    p.ProductKey,\n    p.ProductName,\n    s.StoreKey,\n    s.StoreName", "relation_name": "`default`.`cust_sales_detailed_summary`", "batch_results": null}], "elapsed_time": 1.389460802078247, "args": {"print": true, "selector": "all_models", "require_resource_names_without_spaces": true, "quiet": false, "printer_width": 80, "partial_parse": true, "require_nested_cumulative_type_params": false, "empty": false, "invocation_command": "dbt run --selector all_models", "require_yaml_configuration_for_mf_time_spines": false, "use_colors_file": true, "log_format_file": "debug", "macro_debugging": false, "defer": false, "skip_nodes_if_on_run_start_fails": false, "require_batched_execution_for_custom_microbatch_strategy": false, "show_all_deprecations": false, "upload_to_artifacts_ingest_api": false, "use_colors": true, "write_json": true, "profiles_dir": "/dbt", "log_file_max_bytes": 10485760, "validate_macro_args": false, "introspect": true, "favor_state": false, "partial_parse_file_diff": true, "cache_selected_only": false, "version_check": true, "exclude": [], "indirect_selection": "eager", "populate_cache": true, "send_anonymous_usage_stats": true, "select": [], "which": "run", "static_parser": true, "state_modified_compare_vars": false, "vars": {}, "log_format": "default", "warn_error_options": {"error": [], "warn": [], "silence": []}, "strict_mode": false, "project_dir": "/dbt", "require_all_warnings_handled_by_warn_error": false, "require_generic_test_arguments_property": true, "show_resource_report": false, "require_explicit_package_overrides_for_builtin_materializations": true, "source_freshness_run_project_hooks": true, "use_fast_test_edges": false, "log_level_file": "debug", "log_path": "/dbt/logs", "log_level": "info", "state_modified_compare_more_unrendered_values": false}}